# ğŸ”¬ ê²Œì„ ì‹œì‘ í”„ë ˆì„ ë“œë ê°œì„  ê³„íš

## ğŸ“Š Trace ë¶„ì„ ê²°ê³¼ ìš”ì•½

| ì§€í‘œ | í˜„ì¬ ê°’ | ë¬¸ì œ |
|------|---------|------|
| í”„ë ˆì„ ë“œëìœ¨ | **39.3%** | ğŸ”´ ì‹¬ê° |
| UpdateLayer | **4,364ms** (í‰ê·  727ms/íšŒ) | ğŸ”´ í•µì‹¬ ë³‘ëª© |
| Commit | **482ms** (í‰ê·  80ms/íšŒ) | ğŸ”´ |
| ì¹´í…Œê³ ë¦¬: Rendering | **76.9%** | ìŠ¤í¬ë¦½íŒ… ì•„ë‹Œ ë Œë”ë§ì´ ë¬¸ì œ |
| ì¹´í…Œê³ ë¦¬: Scripting | **0.9%** | âœ… JS ì½”ë“œëŠ” ë¬¸ì œ ì—†ìŒ |

---

## ğŸ¯ ê·¼ë³¸ ì›ì¸

### 1. Container ë‹¹ Graphics ê°ì²´ ê³¼ë‹¤ (7ê°œ â†’ ë§¤ í”„ë ˆì„ GPU ë²„í¼ ì¬í• ë‹¹)

```typescript
// í˜„ì¬: 1 Container = 7ê°œ ê°ì²´, 20ëª… = 140+ ë Œë” ì˜¤ë¸Œì íŠ¸
body = scene.add.graphics();      // Graphics
leftEye = scene.add.graphics();   // Graphics
rightEye = scene.add.graphics();  // Graphics  
rpsSprite, nameText, crownText, dashBar...
```

### 2. `Graphics.clear()` + `fill...()` ë§¤ í”„ë ˆì„ í˜¸ì¶œ â†’ GPU ë²„í¼ ì¬í• ë‹¹

---

## âœ… ê°œì„  ë°©ì•ˆ

### 1. í…ìŠ¤ì²˜ ì‚¬ì „ ìƒì„± (1ê°œ)

| í…ìŠ¤ì²˜ í‚¤ | í¬ê¸° | ìƒ‰ìƒ | ìš©ë„ |
|-----------|------|------|------|
| `circle` | **128Ã—128** | í°ìƒ‰ (0xffffff) | ë³¸ì²´, ëˆˆ í°ì, ëˆˆë™ì ëª¨ë‘ ì‚¬ìš© |

> ì› í•˜ë‚˜ë¡œ `setTint()` + `setScale()`ë¡œ ìƒ‰ìƒ/í¬ê¸° ì¡°ì ˆ

### 2. ì‚¬ìš© ë°©ì‹

```typescript
// ë³¸ì²´ (64px ê¸°ì¤€ ë°˜ì§€ë¦„)
body.setTexture('circle');
body.setTint(playerColor);
body.setScale(player.size / 64);

// ëˆˆ í°ì (tint ì—†ìŒ = í°ìƒ‰)
eyeWhite.setTexture('circle');
eyeWhite.setScale(0.15);

// ëˆˆë™ì (ê²€ì€ìƒ‰)
pupil.setTexture('circle');
pupil.setTint(0x000000);
pupil.setScale(0.08);
```

### 3. ëˆˆë™ì ë§ˆìš°ìŠ¤ ì¶”ì  ê¸°ëŠ¥

```typescript
// updateSprite()ì—ì„œ ëˆˆë™ì ìœ„ì¹˜ ê³„ì‚°
const angle = currentAngle;  // ë§ˆìš°ìŠ¤ ë°©í–¥ ê°ë„ (ì´ë¯¸ ê³„ì‚°ë¨)
const maxOffset = eyeSize * 0.3;  // ëˆˆ ì•ˆì—ì„œ ì´ë™ ê°€ëŠ¥ ë²”ìœ„

const pupilOffsetX = Math.cos(angle) * maxOffset;
const pupilOffsetY = Math.sin(angle) * maxOffset;

leftPupil.setPosition(-eyeOffset + pupilOffsetX, -eyeY + pupilOffsetY);
rightPupil.setPosition(eyeOffset + pupilOffsetX, -eyeY + pupilOffsetY);
```

### 4. Container êµ¬ì¡° ë³€ê²½

| Before (7ê°œ) | After (9ê°œ, but Image ì‚¬ìš©) |
|--------------|------------------------------|
| `body` (Graphics) | `body` (Image) â† tint ì ìš© |
| `leftEye` (Graphics) | `leftEyeWhite` (Image) |
| `rightEye` (Graphics) | `rightEyeWhite` (Image) |
| | `leftPupil` (Image) â† ë§ˆìš°ìŠ¤ ì¶”ì  |
| | `rightPupil` (Image) â† ë§ˆìš°ìŠ¤ ì¶”ì  |
| `rpsSprite` (Sprite) | `rpsSprite` (Sprite) |
| `nameText` (Text) | `nameText` (Text) |
| `crownText` (Text) | `crownText` (Text) |

> **ê°ì²´ ìˆ˜ëŠ” ì¦ê°€í•˜ì§€ë§Œ Graphics â†’ Image ë³€í™˜ìœ¼ë¡œ GPU ë¶€í•˜ ëŒ€í­ ê°ì†Œ**

---

## ğŸ“‹ ë³€ê²½ íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|-----------|
| [MainScene.ts](file:///c:/Users/user/Desktop/DEV/rps_io/client/src/game/scenes/MainScene.ts) | `createPlayerTextures()` ì¶”ê°€ - 3ê°œ ì›í˜• í…ìŠ¤ì²˜ ìƒì„± |
| [PlayerRenderer.ts](file:///c:/Users/user/Desktop/DEV/rps_io/client/src/game/PlayerRenderer.ts) | Graphics â†’ Image ë³€í™˜, `drawBody()`/`drawEyes()` ì œê±°, ëˆˆë™ì ì¶”ì  ë¡œì§ ì¶”ê°€ |

---

## ğŸ§ª ê²€ì¦ ê³„íš

### 1. ìˆ˜ë™ í…ŒìŠ¤íŠ¸
- í”Œë ˆì´ì–´ ìºë¦­í„° ì •ìƒ í‘œì‹œ
- ìƒ‰ìƒ ì •ìƒ ì ìš© (ë‹‰ë„¤ì„ ê¸°ë°˜ í•´ì‹œ)
- **ëˆˆë™ìê°€ ë§ˆìš°ìŠ¤ ë°©í–¥ ì¶”ì **
- RPS ìƒíƒœ ë³€ê²½ ì‹œ ìŠ¤í”„ë¼ì´íŠ¸ ë³€ê²½
- 1ë“± ì™•ê´€ í‘œì‹œ
- ëŒ€ì‹œ ë°” ì‘ë™

### 2. ì„±ëŠ¥ ì¸¡ì • (Chrome DevTools Performance)
- UpdateLayer: 4364ms â†’ **500ms ì´í•˜**
- Commit: 482ms â†’ **100ms ì´í•˜**
- í”„ë ˆì„ ë“œëìœ¨: 39% â†’ **10% ì´í•˜**

### 3. Trace ë¹„êµ
```bash
cd analyze && node analyze_trace.js
```
